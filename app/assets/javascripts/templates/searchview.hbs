<div class="row span12 huge-font" id="searching-message">
  {{#if App.searchResultsController.isSearching}}
    ...Searching. Please wait...
  {{/if}}
</div>
    {{#each result in App.searchController}}
<div class="row">
{{#if result.exactMatch}}
  {{view App.SearchMatch}}
{{else}}
  {{view App.SearchResult resultBinding=result}}
{{/if}}
</div>
{{/each}}

<script type="text/javascript">

$(window).off("scroll", scrollHandler);
//TODO add scrolling back in when cw can handle pagination etc
scrollOnThisPage = false;
pageScrolling = false;

scrollHandler = function() {
    var s = $(window).scrollTop(),
        d = $(document).height(),
        c = $(window).height();
        scrollPercent = (s / (d-c)) * 100;
    if (scrollPercent >= 99 && pageScrolling != true && scrollOnThisPage == true) {
        alert('Search scroll');
//        disable_scroll();
//        pageScrolling = true;
//TODO fetch from search controller
    }
};
$(window).scroll(scrollHandler);
</script>
