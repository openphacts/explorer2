<div {{bind-attr class="fetching::invisible :spinner :bar"}}>
     <div></div>
     <div></div>
     <div></div>
     <div></div>
     <div></div>
     <div></div>
     <div></div>
     <div></div>
</div>
<div>
    <ul class="breadcrumb">
        <li><a href="/">Home</a> <span class="divider">/</span></li>
        <li>{{#link-to "compounds.index" (query-params uri=URI)}}{{prefLabel}}{{/link-to}} <span class="divider">/</span></li>
        <li class="active">Compound Structure</li>
        <div class="row pull-right"> 
            <div class="span1 small-padding-top small-padding-right">Provenance</div>
                <div class="span2 btn-group" data-toggle="buttons-radio" style="margin-top:-5px;">
                    <button class="btn">On</button>
                    <button class="btn active">Off</button>
                </div>
            </div>
        </div>
    </ul>
<div>
		<!-- actual results -->
		<div id="summary-anchor">
		<div id="summary" class="compound_summary collapse in">
			
			<div id="compound-image" class="span2 small-padding-top big-padding-bottom">{{cs_image_src csUri}}</div>
			<div class="row">
				<div class="span8">
    				<h3>{{#link-to "compounds.index" (query-params uri=URI)}}{{prefLabel}}{{/link-to}} ({{currentCount}} of {{totalCount}} results loaded)<a href="#compoundPharmaFilterModalView" role="button" class="btn small-margin-left" data-toggle="modal" title="Click to select filters which can be applied to the results">Filter Results</a><a href="#compoundPharmaDownload" {{action "tsvDownload" this}} role="button" class="btn small-margin-left" data-toggle="modal" title="Click to create in TSV formatted compound pharmacology results">Create TSV</a></h3>
   					<div class="row">
      					<div id="formula" class="span2 lead centre">{{formatMolecularFormula molform}}</div>
      					<div class="span6 justify normal-font">{{expandableDescription description}}</div>
    				</div>
  				</div>
  				<button id="toggle-summary" type="button" class="btn btn-link pull-right" data-target="#summary">less</button>

			<div id="structure" class="span5 small-padding-top">
  					<button  type="button" class="btn btn-link" data-toggle="collapse" data-target="#demo">SMILES and InChIs</button>
					<div id="demo" class="collapse out dl-horizontal" style="font-size:13px;">
						<dl>
  							<dt>SMILES</dt>
  							<dd>{{smiles}}</dd>
  							<dt>Standard InChi</dt>
  							<dd>{{inchi}}</dd>
  							<dt>Standard InChiKey</dt>
  							<dd>{{inchiKey}}</dd>
						</dl>
					</div>
  			</div>
	 		

			</div>
		</div>
		</div>
	</div>
<div class="btn-group medium-margin-top medium-margin-bottom" data-toggle="buttons-radio">
    <div class="big-padding-left">
        <button {{bind-attr class=":btn exactSearch:active"}} {{action 'structureSearchType' 'exact'}}>Exact</button>
        <button {{bind-attr class=":btn subSearch:active"}} {{action 'structureSearchType' 'substructure'}}>Sub-structure</button>
        <button {{bind-attr class=":btn simSearch:active"}} {{action 'structureSearchType' 'similarity'}}>Similarity</button>
    </div>
</div>
	<div style="padding:30px">	
	<table class="mytable">
		<thead id="tablehead" class="headingstyle">
<tr>
				<!-- Each header has an action which triggers when clicked and asks the controller to sort the column -->
				<!-- The header also has an icon which is shown if controller says that it is sorted. A controller bound -->
				<!-- CSS class is used to style the header when it is selected-->
				<th {{action "sortHeader" "prefLabel"}} {{bind-attr class="prefLabelSortASC:sortASC prefLabelSortDESC:sortDESC"}}>Name{{#if prefLabelSortASC}}<i class="icon-chevron-up small-margin-left"></i>{{/if}}{{#if prefLabelSortDESC}}<i class="icon-chevron-down small-margin-left"></i>{{/if}}</th>
				<th {{action "sortHeader" "description"}} {{bind-attr class="descriptionSortASC:sortASC descriptionSortDESC:sortDESC"}}>Description{{#if descriptionSortASC}}<i class="icon-chevron-up small-margin-left"></i>{{/if}}{{#if descriptionSortDESC}}<i class="icon-chevron-down small-margin-left"></i>{{/if}}</th>
				<th {{action "sortHeader" "biotransformationItem"}} {{bind-attr class="biotransSortASC:sortASC biotransSortDESC:sortDESC"}}>Bio Transformation{{#if biotransSortASC}}<i class="icon-chevron-up small-margin-left"></i>{{/if}}{{#if biotransSortDESC}}<i class="icon-chevron-down small-margin-left"></i>{{/if}}</th>
				<th {{action "sortHeader" "toxicity"}} {{bind-attr class="toxicitySortASC:sortASC toxicitySortDESC:sortDESC"}}>Toxicity{{#if toxicitySortASC}}<i class="icon-chevron-up small-margin-left"></i>{{/if}}{{#if toxicitySortDESC}}<i class="icon-chevron-down small-margin-left"></i>{{/if}}</th>
				<th {{action "sortHeader" "proteinBinding"}} {{bind-attr class="proteinBindingSortASC:sortASC proteinBindingSortDESC:sortDESC"}}>Protein Binding{{#if proteinBindingSortASC}}<i class="icon-chevron-up small-margin-left"></i>{{/if}}{{#if proteinBindingSortDESC}}<i class="icon-chevron-down small-margin-left"></i>{{/if}}</th>
				<th {{action "sortHeader" "smiles"}} {{bind-attr class="smilesSortASC:sortASC smilesSortDESC:sortDESC"}}>SMILES{{#if smilesSortASC}}<i class="icon-chevron-up small-margin-left"></i>{{/if}}{{#if smilesSortDESC}}<i class="icon-chevron-down small-margin-left"></i>{{/if}}</th>
				<th {{action "sortHeader" "chemblURI"}} {{bind-attr class="chemblURISortASC:sortASC chemblURISortDESC:sortDESC"}}>Chembl URL{{#if chemblURISortASC}}<i class="icon-chevron-up small-margin-left"></i>{{/if}}{{#if chemblURISortDESC}}<i class="icon-chevron-down small-margin-left"></i>{{/if}}</th>
				<th {{action "sortHeader" "fullMWT"}} {{bind-attr class="fullMWTSortASC:sortASC fullMWTSortDESC:sortDESC"}}>Molecular Weight{{#if fullMWTSortASC}}<i class="icon-chevron-up small-margin-left"></i>{{/if}}{{#if fullMWTSortDESC}}<i class="icon-chevron-down small-margin-left"></i>{{/if}}</th>
				<th {{action "sortHeader" "hba"}} {{bind-attr class="hbaSortASC:sortASC hbaSortDESC:sortDESC"}}>HBA{{#if hbaSortASC}}<i class="icon-chevron-up small-margin-left"></i>{{/if}}{{#if hbaSortDESC}}<i class="icon-chevron-down small-margin-left"></i>{{/if}}</th>
				<th {{action "sortHeader" "hbd"}} {{bind-attr class="hbdSortASC:sortASC hbdSortDESC:sortDESC"}}>HBD{{#if hbdSortASC}}<i class="icon-chevron-up small-margin-left"></i>{{/if}}{{#if hbdSortDESC}}<i class="icon-chevron-down small-margin-left"></i>{{/if}}</th>
				<th {{action "sortHeader" "inchi"}} {{bind-attr class="inchiSortASC:sortASC inchiSortDESC:sortDESC"}}>Inchi{{#if inchiSortASC}}<i class="icon-chevron-up small-margin-left"></i>{{/if}}{{#if inchiSortDESC}}<i class="icon-chevron-down small-margin-left"></i>{{/if}}</th>
				<th {{action "sortHeader" "inchiKey"}} {{bind-attr class="inchiKeySortASC:sortASC inchiKeySortDESC:sortDESC"}}>Inchi Key{{#if inchiKeySortASC}}<i class="icon-chevron-up small-margin-left"></i>{{/if}}{{#if inchiKeySortDESC}}<i class="icon-chevron-down small-margin-left"></i>{{/if}}</th>
				<th {{action "sortHeader" "logp"}} {{bind-attr class="logpSortASC:sortASC logpSortDESC:sortDESC"}}>logP{{#if logpSortASC}}<i class="icon-chevron-up small-margin-left"></i>{{/if}}{{#if logpSortDESC}}<i class="icon-chevron-down small-margin-left"></i>{{/if}}</th>
				<th {{action "sortHeader" "molform"}} {{bind-attr class="molformSortASC:sortASC molformSortDESC:sortDESC"}}>Molecular formula{{#if molformSortASC}}<i class="icon-chevron-up small-margin-left"></i>{{/if}}{{#if molformSortDESC}}<i class="icon-chevron-down small-margin-left"></i>{{/if}}</th>
				<th {{action "sortHeader" "mwFreebase"}} {{bind-attr class="mwFreebaseSortASC:sortASC mwFreebaseSortDESC:sortDESC"}}>MW Freebase{{#if mwFreebaseSortASC}}<i class="icon-chevron-up small-margin-left"></i>{{/if}}{{#if mwFreebaseSortDESC}}<i class="icon-chevron-down small-margin-left"></i>{{/if}}</th>
				<th {{action "sortHeader" "psa"}} {{bind-attr class="psaSortASC:sortASC psaSortDESC:sortDESC"}}>PSA{{#if psaSortASC}}<i class="icon-chevron-up small-margin-left"></i>{{/if}}{{#if psaSortDESC}}<i class="icon-chevron-down small-margin-left"></i>{{/if}}</th>
				<th {{action "sortHeader" "ro5Violations"}} {{bind-attr class="ro5ViolationsSortASC:sortASC ro5ViolationsSortDESC:sortDESC"}}>RO5 Violations{{#if ro5ViolationsSortASC}}<i class="icon-chevron-up small-margin-left"></i>{{/if}}{{#if ro5ViolationsSortDESC}}<i class="icon-chevron-down small-margin-left"></i>{{/if}}</th>
				<th {{action "sortHeader" "rtb"}} {{bind-attr class="rtbSortASC:sortASC rtbSortDESC:sortDESC"}}>RTB{{#if rtbSortASC}}<i class="icon-chevron-up small-margin-left"></i>{{/if}}{{#if rtbSortDESC}}<i class="icon-chevron-down small-margin-left"></i>{{/if}}</th>
    {{#if subSearch}}
				<th {{action "sortHeader" "relevance"}} {{bind-attr class="relevanceSortASC:sortASC relevanceSortDESC:sortDESC"}}>Relevance{{#if relevanceSortASC}}<i class="icon-chevron-up small-margin-left"></i>{{/if}}{{#if relevanceSortDESC}}<i class="icon-chevron-down small-margin-left"></i>{{/if}}</th>
    {{/if}}
    {{#if simSearch}}
				<th {{action "sortHeader" "relevance"}} {{bind-attr class="relevanceSortASC:sortASC relevanceSortDESC:sortDESC"}}>Relevance{{#if relevanceSortASC}}<i class="icon-chevron-up small-margin-left"></i>{{/if}}{{#if relevanceSortDESC}}<i class="icon-chevron-down small-margin-left"></i>{{/if}}</th>
    {{/if}}
</tr>
</thead>
<tbody>
{{#each structureRecord in structure}}
<tr class="record-deco">
    <td class="cell-basictext">{{#link-to "compounds.index" (query-params uri=structureRecord.URI)}}{{structureRecord.prefLabel}}{{/link-to}}</td>
    <td class="cell-basictext">{{structureRecord.description}}</td>
    <td class="cell-basictext">{{structureRecord.biotransformationItem}}</td>
    <td class="cell-basictext">{{structureRecord.toxicity}}</td>
    <td class="cell-basictext">{{structureRecord.proteinBinding}}</td>
    <td class="cell-basictext">{{structureRecord.smiles}}</td>
    <td class="cell-basictext">{{textLink structureRecord.chemblURI}}</td>
    <td class="cell-basictext">{{structureRecord.fullMWT}}</td>
    <td class="cell-basictext">{{structureRecord.hba}}</td>
    <td class="cell-basictext">{{structureRecord.hbd}}</td>
    <td class="cell-basictext">{{structureRecord.inchi}}</td>
    <td class="cell-basictext">{{structureRecord.inchiKey}}</td>
    <td class="cell-basictext">{{structureRecord.logp}}</td>
    <td class="cell-basictext">{{formatMolecularFormula structureRecord.molform}}</td>
    <td class="cell-basictext">{{structureRecord.mwFreebase}}</td>
    <td class="cell-basictext">{{structureRecord.psa}}</td>
    <td class="cell-basictext">{{structureRecord.ro5Violations}}</td>
    <td class="cell-basictext">{{structureRecord.rtb}}</td>
    {{#if subSearch}}
        <td class="cell-basictext">{{structureRecord.relevance}}</td>
    {{/if}}
    {{#if simSearch}}
        <td class="cell-basictext">{{structureRecord.relevance}}</td>
    {{/if}}
</tr>
{{/each}}
</tbody>
</table>
</div>
